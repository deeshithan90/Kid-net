<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body
    bgcolor="black"
    style="
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
    "
  >
    <center>
      <br />
      <br />
      <div>
        <img src="./images/Kit Net.png" alt="" width="100px" />
      </div>
      <div>
        <input
          type="number"
          placeholder="Mobile"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
          "
          class="b"
          id="mn"
        />
        <br />
        <br />
        <input
          type="text"
          placeholder="Parent`s name"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
          "
          class="b"
          id="p"
        />
        <br />
        <br />
        <input
          type="text"
          placeholder="Mail"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
          "
          class="b"
          id="m"
        />
        <br />
        <br />
        <input
          type="text"
          placeholder="Kid`s name"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
          "
          class="b"
          id="k"
        />
        <br />
        <br />
        <input
          type="date"
          placeholder="DOB"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
            width: 170px;
          "
          class="b"
          id="d"
        />
        <br />
        <br />
        <input
          type="text"
          placeholder="School`s name"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
          "
          class="b"
          id="s"
        />
        <br />
        <br />
        <input
          type="text"
          placeholder="Location"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
          "
          class="b"
          id="l"
        />
        <br />
        <br />
        <input
          type="password"
          placeholder="create password"
          style="
            background-color: black;
            border: white 2px solid;
            padding: 16px;
            color: white;
            outline: none;
          "
          class="b"
          id="ps"
        />
      </div>
      <br />
      <div>
        <button
          style="
            background-color: green;
            width: 200px;
            height: 40px;
            border: none;
            border-radius: 25px;
          "
          onclick="signup()"
        >
          Sign-in
        </button>
      </div>
      <div class="">
        <h3 style="color: white">
          You haven already account please
          <h4 style="color: white">Login</h4>
        </h3>
      </div>
    </center>
    <script>
       // Get all input fields
const p = document.getElementById("p");
const m = document.getElementById("m");
const k = document.getElementById("k");
const d = document.getElementById("d");
const s = document.getElementById("s");
const l = document.getElementById("l");
const ps = document.getElementById("ps");
const mn = document.getElementById("mn");

let speeck = new SpeechSynthesisUtterance();

// Signup function
async function signup() {
  // Simple front-end validation
  if (
    !p.value ||
    !m.value ||
    !k.value ||
    !d.value ||
    !s.value ||
    !l.value ||
    !ps.value ||
    !mn.value
  ) {
    alert("⚠️ Please fill all fields. before signing up!");
    speak("Please fill all fields. before signing up!")
    return;
  }

  const userData = {
    parent: p.value.trim(),
    kidName: k.value.trim(),
    mail: m.value.trim(),
    dob: d.value,
    school: s.value.trim(),
    location: l.value.trim(),
    password: ps.value,
    mobile: mn.value.trim(),
  };

  try {
    const res = await fetch("/api/signup", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(userData),
    });

    const data = await res.json();

    if (res.ok && data.ok) {
      alert("✅ Signup successful!");
      console.log("User saved:", data.user);
      speak("Signup succesfully")
      window.location.href = "login.html"
    } else {
      alert("❌ " + (data.message || "Signup failed."));
    }
  } catch (error) {
    console.error("Error during signup:", error);
    alert("⚠️ Server connection error. Check console.");
  }
}


function speak(text) {
  if (!('speechSynthesis' in window)) {
    alert('Sorry, your browser does not support speechSynthesis.');
    return;
  }
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'en-IN';       // pick a locale you like
  utter.rate = 1;             // 0.1–10 (1 = normal)
  utter.pitch = 1;            // 0–2
  utter.volume = 1;           // 0–1
  speechSynthesis.cancel();   // stop anything currently speaking
  speechSynthesis.speak(utter);
}
    </script>
  </body>
</html>
